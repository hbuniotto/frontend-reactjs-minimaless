{"ast":null,"code":"var _jsxFileName = \"/Users/humbertobuniotto/Desktop/Ironhack/Module3/frontend-reactjs-minimaless/src/views/NewListing/components/NewListingDetails/components/Pictures.js\";\nimport React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport { Grid, Typography, Button, CircularProgress } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Axios from 'axios';\nimport '../../../../../assets/scss/slider.scss';\n\nconst useStyles = theme => ({\n  root: {},\n  text: {\n    textAlign: 'center',\n    padding: 20\n  },\n  input: {\n    display: 'none'\n  },\n  uploadbtn: {\n    textAlign: 'center'\n  },\n  image: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    flexWrap: 'wrap'\n  },\n  imageBody: {\n    margin: 7\n  },\n  productImg: {\n    height: 120,\n    width: 180\n  },\n  iconarea: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: 'auto',\n    marginLeft: '20%'\n  }\n});\n\nclass Pictures extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      uploadedFiles: [],\n      uploading: false\n    };\n\n    this.handleImageChange = e => {\n      this.setState({\n        uploading: true\n      });\n      let formData = new FormData();\n      const config = {\n        header: {\n          'content-type': 'multipart/form-data'\n        }\n      };\n      formData.append(\"file\", e.target.files[0]);\n      Axios.post('/api/listings/uploadimage', formData, config).then(response => {\n        this.setState({\n          uploading: false,\n          uploadedFiles: [...this.state.uploadedFiles, response.data]\n        }, () => {\n          this.props.imagesHandler(this.state.uploadedFiles);\n          this.setState({\n            uploading: false\n          });\n        });\n      }).catch(err => {\n        console.log(err);\n        this.setState({\n          uploading: false\n        });\n      });\n    };\n\n    this.onRemove = id => {\n      this.setState({\n        uploading: true\n      });\n      Axios.get(`/api/listings/removeimage?public_id=${id}`).then(response => {\n        let images = this.state.uploadedFiles.filter(item => {\n          return item.public_id !== id;\n        });\n        this.setState({\n          uploadedFiles: images,\n          uploading: false\n        }, () => {\n          this.props.imagesHandler(images);\n        });\n      });\n    };\n\n    this.classes = useStyles();\n  }\n\n  render() {\n    const {\n      images\n    } = this.props.formState;\n    const {\n      classes\n    } = this.props;\n    console.log(this.state.uploadedFiles);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      style: {\n        margin: '0 auto'\n      },\n      item: true,\n      md: 8,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.text,\n      color: \"textSecondary\",\n      variant: \"body1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }, \"Upload pictures of your listing to impress potential renters. Be sure to star your favorite photo to featured as the primary image in the search results.\")), /*#__PURE__*/React.createElement(Grid, {\n      style: {\n        margin: '0 auto'\n      },\n      item: true,\n      md: 12,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.uploadbtn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      accept: \"image/*\",\n      className: classes.input,\n      id: \"contained-button-file\",\n      multiple: true,\n      type: \"file\",\n      onChange: this.handleImageChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"contained-button-file\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      component: \"span\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 23\n      }\n    }, \"Upload\"))), images.length !== 5 ? /*#__PURE__*/React.createElement(Typography, {\n      style: {\n        color: 'blue'\n      },\n      className: classes.text,\n      color: \"textSecondary\",\n      variant: \"body1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 43\n      }\n    }, \"Upload at least 5 pictures. Your fist uploaded picture will be shown as your featured image in listings.\") : /*#__PURE__*/React.createElement(Typography, {\n      className: classes.text,\n      style: {\n        color: 'green'\n      },\n      color: \"textSecondary\",\n      variant: \"body1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 35\n      }\n    }, \"Cool stuff\", /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 31\n      }\n    }, \"\\uD83D\\uDC4C\"), \" Click Next to continue\")), /*#__PURE__*/React.createElement(Grid, {\n      style: {\n        margin: '0 auto'\n      },\n      item: true,\n      md: 12,\n      xs: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 15\n      }\n    }, this.state.uploading ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: 'center'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 42\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 77\n      }\n    })) : '', images.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    }, images.map((image, i) => /*#__PURE__*/React.createElement(\"div\", {\n      key: i,\n      className: classes.imageBody,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: classes.productImg,\n      src: image.url,\n      alt: \"product\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.iconarea,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      onClick: () => this.onRemove(image.public_id),\n      style: {\n        fill: 'gray',\n        cursor: 'pointer'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 37\n      }\n    }))))) : '')));\n  }\n\n}\n\nPictures.propTypes = {\n  className: PropTypes.string\n};\nexport default withStyles(useStyles)(Pictures);","map":{"version":3,"sources":["/Users/humbertobuniotto/Desktop/Ironhack/Module3/frontend-reactjs-minimaless/src/views/NewListing/components/NewListingDetails/components/Pictures.js"],"names":["React","Component","withStyles","PropTypes","Grid","Typography","Button","CircularProgress","DeleteIcon","Axios","useStyles","theme","root","text","textAlign","padding","input","display","uploadbtn","image","justifyContent","alignItems","flexWrap","imageBody","margin","productImg","height","width","iconarea","marginLeft","Pictures","state","uploadedFiles","uploading","handleImageChange","e","setState","formData","FormData","config","header","append","target","files","post","then","response","data","props","imagesHandler","catch","err","console","log","onRemove","id","get","images","filter","item","public_id","classes","render","formState","length","color","map","i","url","fill","cursor","propTypes","className","string"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport PropTypes from 'prop-types';\r\nimport {\r\n  Grid,\r\n  Typography,\r\n  Button,\r\n  CircularProgress\r\n} from '@material-ui/core';\r\n\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport Axios from 'axios'\r\n\r\nimport '../../../../../assets/scss/slider.scss';\r\n\r\nconst useStyles = theme => ({\r\n    root: {},\r\n    text: {\r\n        textAlign: 'center',\r\n        padding: 20,\r\n    },\r\n    input: {\r\n        display: 'none',\r\n    },\r\n    uploadbtn: {\r\n        textAlign: 'center'\r\n    },\r\n    image: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        flexWrap: 'wrap',\r\n    },\r\n    imageBody: {\r\n        margin: 7\r\n    },\r\n    productImg: {\r\n        height: 120,\r\n        width: 180,\r\n    },\r\n    iconarea: {\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        width: 'auto',\r\n        marginLeft: '20%'\r\n    }\r\n});\r\n\r\nclass Pictures extends Component {\r\n\r\n    state = {\r\n        uploadedFiles: [],\r\n        uploading: false\r\n    }\r\n\r\n    handleImageChange = (e) => {\r\n        this.setState({uploading:true});\r\n        let formData = new FormData();\r\n        const config = {\r\n            header: {'content-type':'multipart/form-data'}\r\n        }\r\n        formData.append(\"file\",e.target.files[0]);\r\n\r\n        Axios.post('/api/listings/uploadimage',formData,config)\r\n        .then(response => {\r\n            this.setState({\r\n                uploading:false,\r\n                uploadedFiles:[\r\n                    ...this.state.uploadedFiles,\r\n                    response.data\r\n                ]\r\n            },()=>{\r\n                this.props.imagesHandler(this.state.uploadedFiles)\r\n                this.setState({uploading:false});\r\n             })\r\n        }).catch(err => {\r\n            console.log(err)\r\n            this.setState({uploading:false});\r\n        });\r\n     }\r\n\r\n     onRemove = (id) => {\r\n        this.setState({uploading:true});\r\n        Axios.get(`/api/listings/removeimage?public_id=${id}`).then(response=>{\r\n            let images = this.state.uploadedFiles.filter(item=>{\r\n                return item.public_id !== id;\r\n            });\r\n\r\n            this.setState({\r\n                uploadedFiles: images,\r\n                uploading:false\r\n            },()=>{\r\n                this.props.imagesHandler(images)\r\n            })\r\n        })\r\n    }\r\n    \r\n\r\n    classes = useStyles();\r\n\r\n    render() {\r\n        const { images } = this.props.formState;\r\n        const { classes} = this.props\r\n        console.log(this.state.uploadedFiles)\r\n        return (\r\n            <div>\r\n            <Grid\r\n              container\r\n              spacing={3}\r\n            >\r\n              <Grid\r\n              style={{margin: '0 auto'}}\r\n              item\r\n              md={8}\r\n              xs={12}\r\n              >\r\n              <Typography\r\n                  className={classes.text}\r\n                  color=\"textSecondary\"\r\n                  variant=\"body1\"\r\n                  >\r\n                  Upload pictures of your listing to impress potential renters. Be sure to star your favorite photo to featured as the primary image in the search results.\r\n              </Typography>\r\n              </Grid>\r\n              <Grid\r\n              style={{margin: '0 auto'}}\r\n                item\r\n                md={12}\r\n                xs={12}\r\n              >\r\n                  <div className={classes.uploadbtn}>\r\n                  <input\r\n                      accept=\"image/*\"\r\n                      className={classes.input}\r\n                      id=\"contained-button-file\"\r\n                      multiple\r\n                      type=\"file\"\r\n                      onChange={this.handleImageChange}\r\n                  />\r\n                  <label htmlFor=\"contained-button-file\">\r\n                      <Button variant=\"contained\" color=\"primary\" component=\"span\">\r\n                        Upload\r\n                      </Button>\r\n                  </label>\r\n                  </div>\r\n                  {images.length !== 5 ? (<Typography\r\n                    style={{color: 'blue'}}\r\n                    className={classes.text}\r\n                    color=\"textSecondary\"\r\n                    variant=\"body1\"\r\n                    >\r\n                    Upload at least 5 pictures. Your fist uploaded picture will be shown as your featured image in listings.\r\n                </Typography>) : (<Typography\r\n                    className={classes.text}\r\n                    style={{color: 'green'}}\r\n                    color=\"textSecondary\"\r\n                    variant=\"body1\"\r\n                    >\r\n                    Cool stuff<span>👌</span> Click Next to continue\r\n                </Typography>)}\r\n                \r\n              </Grid>\r\n              <Grid\r\n                style={{margin: '0 auto'}}\r\n                item\r\n                md={12}\r\n                xs={12}\r\n              >\r\n                  \r\n                {this.state.uploading ?  <div style={{textAlign: 'center'}}><CircularProgress /></div> : '' }               \r\n\r\n                {images.length > 0 ? (\r\n                    <div className={classes.image}>\r\n                        {images.map((image, i )=> (\r\n                            <div key={i} className={classes.imageBody}>\r\n                                <img className={classes.productImg} src={image.url} alt=\"product\" />\r\n                                <div className={classes.iconarea}>\r\n                                    <DeleteIcon onClick={()=> this.onRemove(image.public_id)} \r\n                                style={{ fill: 'gray', \r\n                                cursor: 'pointer' }} />\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                  ) : ''\r\n                }\r\n              </Grid>\r\n            </Grid>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nPictures.propTypes = {\r\n    className: PropTypes.string\r\n};\r\n\r\n\r\nexport default withStyles(useStyles)(Pictures)\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}