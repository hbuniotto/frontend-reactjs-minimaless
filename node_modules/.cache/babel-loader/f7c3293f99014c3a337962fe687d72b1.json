{"ast":null,"code":"var _jsxFileName = \"/Users/humbertobuniotto/Desktop/Ironhack/Module3/frontend-reactjs-minimaless/src/views/NewListing/components/NewListingDetails/NewListingDetails.js\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles, formatMs } from '@material-ui/core/styles';\nimport ListDetails from './components/ListDetails';\nimport Pictures from './components/Pictures';\nimport PriceList from './components/PriceList';\nimport AlertNotify from './components/AlertNotify';\nimport { Grid, Stepper, Step, StepLabel, Button } from '@material-ui/core';\nimport { withRouter } from 'react-router-dom';\nimport Axios from 'axios';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '80%'\n  },\n  btnGroup: {\n    textAlign: 'center',\n    marginTop: 50\n  },\n  button: {\n    marginRight: theme.spacing(1)\n  },\n  instructions: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1)\n  }\n}));\n\nfunction getSteps() {\n  return ['Listing Details', 'Pictures', 'Price & List'];\n}\n\nconst NewListingDetails = props => {\n  const classes = useStyles();\n  const [activeStep, setActiveStep] = useState(0);\n  const [formState, setFormState] = useState({\n    isValid: true,\n    values: {\n      title: '',\n      brand: '',\n      description: '',\n      size: '',\n      condition: '',\n      category: '',\n      occasion: '',\n      color: '',\n      price: ''\n    },\n    images: [],\n    imagasSuccess: false\n  });\n  const steps = getSteps();\n\n  const handleNext = () => {\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n\n  const handleSubmit = () => {\n    const listingData = {\n      title: formState.values.title,\n      brand: formState.values.brand,\n      description: formState.values.description,\n      size: formState.values.size,\n      condition: formState.values.condition,\n      category: formState.values.category,\n      occasion: formState.values.occasion,\n      color: formState.values.color,\n      price: formState.values.price,\n      images: formState.images\n    };\n    Axios.post('/api/listings', listingData).then(res => {\n      setTimeout(() => {\n        props.history.push('/listings');\n      }, 2000);\n    }).catch(err => {\n      console.log(err);\n    });\n    setActiveStep(prevActiveStep => prevActiveStep + 1);\n  };\n\n  const handleBack = () => {\n    setActiveStep(prevActiveStep => prevActiveStep - 1);\n  };\n\n  const isFormValid = data => {\n    const {\n      title,\n      brand,\n      description,\n      size,\n      condition,\n      category,\n      occasion,\n      color\n    } = data;\n\n    if (!title || !brand || !description || !size || !condition || !category || !occasion || !color) {\n      return true;\n    }\n\n    return false;\n  };\n\n  useEffect(() => {\n    const errors = isFormValid(formState.values);\n    setFormState(formState => ({ ...formState,\n      isValid: errors ? false : true,\n      errors: errors || {}\n    }));\n  }, [formState.values]);\n\n  const handleChange = event => {\n    event.persist();\n    setFormState(formState => ({ ...formState,\n      values: { ...formState.values,\n        [event.target.name]: event.target.type === 'checkbox' ? event.target.checked : event.target.value\n      }\n    }));\n  };\n\n  const imagesHandler = images => {\n    setFormState(formState => ({ ...formState,\n      images\n    }));\n  };\n\n  const getStepContent = step => {\n    switch (step) {\n      case 0:\n        return /*#__PURE__*/React.createElement(ListDetails, {\n          handleChange: handleChange,\n          formState: formState,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 16\n          }\n        });\n\n      case 1:\n        return /*#__PURE__*/React.createElement(Pictures, {\n          formState: formState,\n          imagesHandler: images => imagesHandler(images),\n          reset: formState.imagasSuccess,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 16\n          }\n        });\n\n      case 2:\n        return /*#__PURE__*/React.createElement(PriceList, {\n          handleChange: handleChange,\n          formState: formState,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 16\n          }\n        });\n\n      default:\n        return 'Unknown step';\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Stepper, {\n    activeStep: activeStep,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }, steps.map((label, index) => {\n    const stepProps = {};\n    const labelProps = {};\n    return /*#__PURE__*/React.createElement(Step, Object.assign({\n      key: label\n    }, stepProps, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(StepLabel, Object.assign({}, labelProps, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }), label));\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }\n  }, activeStep === steps.length ? /*#__PURE__*/React.createElement(AlertNotify, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    className: classes.instructions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, getStepContent(activeStep)), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.btnGroup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    disabled: activeStep === 0,\n    onClick: handleBack,\n    className: classes.button,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, \"Back\"), activeStep === 0 ? /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleNext,\n    disabled: !formState.isValid,\n    className: classes.buttonNext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, \"Next\") : '', activeStep === 1 ? /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: formState.images.length !== 5,\n    onClick: handleNext,\n    className: classes.buttonNext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 15\n    }\n  }, \"Next\") : '', activeStep === 2 ? /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: formState.values.price === '',\n    onClick: handleSubmit,\n    className: classes.buttonNext,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  }, \"Finish\") : ''))));\n};\n\nexport default withRouter(NewListingDetails); // REFACTOR REDIRECT TO LISTINS PAGE","map":{"version":3,"sources":["/Users/humbertobuniotto/Desktop/Ironhack/Module3/frontend-reactjs-minimaless/src/views/NewListing/components/NewListingDetails/NewListingDetails.js"],"names":["React","useState","useEffect","makeStyles","formatMs","ListDetails","Pictures","PriceList","AlertNotify","Grid","Stepper","Step","StepLabel","Button","withRouter","Axios","useStyles","theme","root","width","btnGroup","textAlign","marginTop","button","marginRight","spacing","instructions","marginBottom","getSteps","NewListingDetails","props","classes","activeStep","setActiveStep","formState","setFormState","isValid","values","title","brand","description","size","condition","category","occasion","color","price","images","imagasSuccess","steps","handleNext","prevActiveStep","handleSubmit","listingData","post","then","res","setTimeout","history","push","catch","err","console","log","handleBack","isFormValid","data","errors","handleChange","event","persist","target","name","type","checked","value","imagesHandler","getStepContent","step","map","label","index","stepProps","labelProps","length","buttonNext"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { makeStyles, formatMs } from '@material-ui/core/styles';\r\nimport ListDetails from './components/ListDetails'\r\nimport Pictures from './components/Pictures';\r\nimport PriceList from './components/PriceList';\r\nimport AlertNotify from './components/AlertNotify';\r\nimport { Grid, Stepper, Step, StepLabel, Button } from '@material-ui/core';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nimport Axios from 'axios';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: '80%',\r\n  },\r\n  btnGroup: {\r\n    textAlign: 'center',\r\n    marginTop: 50\r\n  },\r\n  button: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n  instructions: {\r\n    marginTop: theme.spacing(1),\r\n    marginBottom: theme.spacing(1),\r\n  },\r\n}));\r\n\r\nfunction getSteps() {\r\n  return ['Listing Details', 'Pictures', 'Price & List'];\r\n}\r\n\r\nconst NewListingDetails = (props) => {\r\n  const classes = useStyles();\r\n  const [activeStep, setActiveStep] = useState(0);\r\n\r\n  const [formState, setFormState] = useState({\r\n    isValid: true,\r\n    values: {\r\n      title: '',\r\n      brand: '',\r\n      description: '',\r\n      size: '',\r\n      condition: '',\r\n      category: '',\r\n      occasion: '',\r\n      color: '',\r\n      price: ''\r\n    },\r\n    images: [],\r\n    imagasSuccess: false\r\n  });\r\n\r\n\r\n\r\n  const steps = getSteps();\r\n\r\n  const handleNext = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    const listingData = {\r\n      title: formState.values.title,\r\n      brand: formState.values.brand,\r\n      description: formState.values.description,\r\n      size: formState.values.size,\r\n      condition: formState.values.condition,\r\n      category: formState.values.category,\r\n      occasion: formState.values.occasion,\r\n      color: formState.values.color,\r\n      price: formState.values.price,\r\n      images: formState.images\r\n    }\r\n    Axios.post('/api/listings', listingData)\r\n      .then(res => {\r\n        setTimeout(() => {\r\n          props.history.push('/listings')\r\n        }, 2000);\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n    setActiveStep((prevActiveStep) => prevActiveStep + 1);\r\n  }\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  const isFormValid = (data) => {\r\n    const {title, brand, description, size, condition, category, occasion, color} = data\r\n\r\n    if(!title || !brand || !description || !size || !condition || !category || !occasion || !color) {\r\n      return true\r\n    }\r\n    return false\r\n  };\r\n\r\n  useEffect(() => {\r\n    const errors = isFormValid(formState.values);\r\n\r\n    setFormState(formState => ({\r\n      ...formState,\r\n      isValid: errors ? false : true,\r\n      errors: errors || {}\r\n    }));\r\n  }, [formState.values]);\r\n\r\n  const handleChange = event => {\r\n    event.persist();\r\n    setFormState(formState => ({\r\n      ...formState,\r\n      values: {\r\n        ...formState.values,\r\n        [event.target.name]:\r\n          event.target.type === 'checkbox'\r\n            ? event.target.checked\r\n            : event.target.value\r\n      },\r\n    }));\r\n  };\r\n\r\n  const imagesHandler = (images) => {\r\n    setFormState(formState => ({\r\n      ...formState,\r\n      images\r\n    }));\r\n}\r\n\r\n  const getStepContent = (step) => {\r\n    switch (step) {\r\n      case 0:\r\n        return <ListDetails handleChange={handleChange} formState={formState} />;\r\n      case 1:\r\n        return <Pictures formState={formState} imagesHandler={images => imagesHandler(images)} reset={formState.imagasSuccess} />;\r\n      case 2:\r\n        return <PriceList handleChange={handleChange} formState={formState} />;\r\n      default:\r\n        return 'Unknown step';\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Stepper activeStep={activeStep}>\r\n        {steps.map((label, index) => {\r\n          const stepProps = {};\r\n          const labelProps = {};\r\n          return (\r\n            <Step key={label} {...stepProps}>\r\n              <StepLabel {...labelProps}>{label}</StepLabel>\r\n            </Step>\r\n          );\r\n        })}\r\n      </Stepper>\r\n\r\n      <div>\r\n        {activeStep === steps.length ? (\r\n          <AlertNotify  />\r\n        ) : (\r\n          <div>\r\n            <Grid className={classes.instructions}>{getStepContent(activeStep)}</Grid>\r\n            <div className={classes.btnGroup}>\r\n              <Button disabled={activeStep === 0} onClick={handleBack} className={classes.button}>\r\n                Back\r\n              </Button>\r\n            {\r\n            activeStep === 0 ? \r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={handleNext}\r\n                disabled={!formState.isValid}\r\n                className={classes.buttonNext}\r\n              >Next</Button> : ''\r\n            }\r\n            {\r\n            activeStep === 1 ? \r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                disabled={formState.images.length !== 5}\r\n                onClick={handleNext}\r\n                className={classes.buttonNext}\r\n              >Next</Button> : ''\r\n            }\r\n            {\r\n            activeStep === 2 ? \r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                disabled={formState.values.price === ''}\r\n                onClick={handleSubmit}\r\n                className={classes.buttonNext}\r\n              >Finish</Button> : ''\r\n            }\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withRouter(NewListingDetails)\r\n\r\n// REFACTOR REDIRECT TO LISTINS PAGE"]},"metadata":{},"sourceType":"module"}