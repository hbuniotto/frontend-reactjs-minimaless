{"ast":null,"code":"var _jsxFileName = \"/Users/humbertobuniotto/Desktop/Ironhack/Module3/frontend-reactjs-minimaless/src/context/Listing/ListingProvider.js\";\nimport React, { useReducer } from 'react';\nimport ListingContext from './ListingContext';\nimport ListingReducer from './ListingReducer';\nimport Axios from 'axios';\n\nconst LisingProvider = props => {\n  const initialState = {\n    lists: [],\n    list: {},\n    loading: false\n  };\n  const [state, dispatch] = useReducer(ListingReducer, initialState); // Get all Posts\n\n  const getListings = async () => {\n    try {\n      dispatch({\n        type: 'SENDING_REQUEST'\n      });\n      const res = await Axios.get('/api/listings');\n      const data = await res.data.lists;\n      dispatch({\n        type: 'REQUEST_FINISHED'\n      });\n      dispatch({\n        type: 'GET_LISTS',\n        payload: data\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  }; // Add List \n\n\n  const addList = async listData => {\n    try {\n      dispatch({\n        type: 'SENDING_REQUEST'\n      });\n      const res = await Axios.post('/api/listings', listData);\n      dispatch({\n        type: 'REQUEST_FINISHED'\n      });\n      dispatch({\n        type: 'ADD_LIST',\n        payload: res.data\n      });\n    } catch (err) {\n      console.log(err);\n      dispatch({\n        type: 'REQUEST_FINISHED'\n      });\n    }\n  }; // Delete List \n\n\n  const deleteList = async id => {\n    try {\n      dispatch({\n        type: 'SENDING_REQUEST'\n      });\n      await Axios.delete(`api/listings/${id}`);\n      dispatch({\n        type: 'REQUEST_FINISHED'\n      });\n    } catch (err) {\n      console.log(err);\n      dispatch({\n        type: 'REQUEST_FINISHED'\n      });\n    }\n  }; // delete 5 images\n\n\n  const deleteAllImage = async public_id => {\n    try {\n      dispatch({\n        type: 'SENDING_REQUEST'\n      });\n      await Axios.delete(`/api/deleteimage?public_id=${public_id}`);\n      dispatch({\n        type: 'REQUEST_FINISHED'\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(ListingContext.Provider, {\n    value: {\n      listingsData: state.lists,\n      loading: state.loading,\n      getListings: getListings,\n      deleteList: deleteList,\n      deleteAllImage: deleteAllImage,\n      addList: addList\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, props.children);\n};\n\nexport default LisingProvider;","map":{"version":3,"sources":["/Users/humbertobuniotto/Desktop/Ironhack/Module3/frontend-reactjs-minimaless/src/context/Listing/ListingProvider.js"],"names":["React","useReducer","ListingContext","ListingReducer","Axios","LisingProvider","props","initialState","lists","list","loading","state","dispatch","getListings","type","res","get","data","payload","err","console","log","addList","listData","post","deleteList","id","delete","deleteAllImage","public_id","listingsData","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from 'react';\r\nimport ListingContext from './ListingContext';\r\nimport ListingReducer from './ListingReducer';\r\nimport Axios from 'axios';\r\n\r\n\r\n\r\nconst LisingProvider = props => {\r\n    const initialState = {\r\n        lists: [],\r\n        list: {},\r\n        loading: false\r\n      };\r\n\r\n    const [state, dispatch] = useReducer(ListingReducer, initialState);\r\n\r\n    // Get all Posts\r\n    const getListings = async () => {\r\n        try {\r\n            dispatch({ type: 'SENDING_REQUEST' });\r\n            const res = await Axios.get('/api/listings')\r\n            const data = await res.data.lists;\r\n            dispatch({ type: 'REQUEST_FINISHED' });\r\n            dispatch({ type: 'GET_LISTS', payload: data });\r\n        } catch (err) {\r\n            console.log(err);\r\n        }\r\n    };\r\n\r\n    // Add List \r\n    const addList = async (listData) => {\r\n        try {\r\n            dispatch({ type: 'SENDING_REQUEST' });\r\n            const res = await Axios.post('/api/listings', listData)\r\n            dispatch({ type: 'REQUEST_FINISHED' });\r\n            dispatch({ type: 'ADD_LIST', payload: res.data })\r\n        } catch(err) {\r\n            console.log(err)\r\n            dispatch({ type: 'REQUEST_FINISHED' });\r\n        }\r\n    } \r\n\r\n    // Delete List \r\n    const deleteList = async (id) => {\r\n        try {\r\n            dispatch({ type: 'SENDING_REQUEST' });\r\n                await Axios.delete(`api/listings/${id}`)\r\n            dispatch({ type: 'REQUEST_FINISHED' });\r\n        } catch(err) {\r\n            console.log(err)\r\n            dispatch({ type: 'REQUEST_FINISHED' });\r\n        }\r\n    }\r\n\r\n    // delete 5 images\r\n    const deleteAllImage = async (public_id) => {\r\n        try {\r\n            dispatch({ type: 'SENDING_REQUEST' });\r\n                await Axios.delete(`/api/deleteimage?public_id=${public_id}`)\r\n            dispatch({ type: 'REQUEST_FINISHED' });\r\n        } catch(err) {\r\n            console.log(err)\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <ListingContext.Provider\r\n            value={{\r\n                listingsData: state.lists,\r\n                loading: state.loading,\r\n                getListings: getListings,\r\n                deleteList: deleteList,\r\n                deleteAllImage: deleteAllImage,\r\n                addList: addList\r\n            }}\r\n        >\r\n            {props.children}\r\n        </ListingContext.Provider>\r\n    );\r\n};\r\n\r\nexport default LisingProvider;\r\n"]},"metadata":{},"sourceType":"module"}